<!DOCTYPE html>
<html>
<head>
   <title>Calendar</title>
   <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
   <style>
       body {
           font-family: 'Roboto', sans-serif;
           background-color: #f5f5f5;
           margin: 20px;
           padding: 20px;
       }


       h2 {
           color: #2c3e50;
           text-align: center;
           margin-bottom: 30px;
           font-size: 28px;
           text-transform: uppercase;
           letter-spacing: 2px;
       }


       table {
           border-collapse: collapse;
           width: 100%;
           background-color: white;
           border-radius: 10px;
           overflow: hidden;
           box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
       }


       th {
           background-color: #3498db;
           color: white;
           padding: 15px;
           font-weight: 500;
       }


       td {
           border: 1px solid #ecf0f1;
           text-align: center;
           width: 14%;
           height: 100px;
           cursor: pointer;
           transition: all 0.3s ease;
           position: relative;
       }


       td:hover {
           background-color: #f7f9fc;
           transform: scale(1.02);
       }


       .calendar-cell {
           padding: 10px;
       }


       .popup {
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background: white;
           padding: 25px;
           border-radius: 10px;
           border: none;
           box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
           display: none;
           z-index: 100;
           min-width: 300px;
           max-width: 500px;
       }


       .popup-close {
           position: absolute;
           right: 15px;
           top: 15px;
           cursor: pointer;
           color: #e74c3c;
           font-size: 20px;
           transition: all 0.3s ease;
       }


       .popup-close:hover {
           color: #c0392b;
           transform: scale(1.1);
       }


       #popup-content {
           margin-top: 10px;
       }


       #popup-content h3 {
           color: #2c3e50;
           margin-bottom: 20px;
           border-bottom: 2px solid #3498db;
           padding-bottom: 10px;
       }


       #popup-content ul {
           list-style: none;
           padding: 0;
       }


       #popup-content li {
           margin: 15px 0;
           padding: 10px;
           background-color: #f8f9fa;
           border-radius: 5px;
       }


       #popup-content strong {
           color: #3498db;
           margin-right: 10px;
       }


       /* Add these classes to style different status types */
       .status-present {
           background-color: #e8f5e9;
       }


       .status-absent {
           background-color: #ffebee;
       }


       .status-holiday {
           background-color: #fff3e0;
       }


       /* Today's date highlight */
       .today {
           border: 2px solid #3498db;
           font-weight: bold;
       }


       /* Responsive design */
       @media (max-width: 768px) {
           body {
               margin: 10px;
               padding: 10px;
           }


           table {
               font-size: 14px;
           }


           td {
               height: 60px;
           }


           .popup {
               width: 90%;
               max-width: none;
           }
       }


       /* Optional: Add a subtle overlay when popup is shown */
       .overlay {
           position: fixed;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background-color: rgba(0, 0, 0, 0.5);
           display: none;
           z-index: 99;
       }
   </style>
</head>
<body>
   <h2>
   <a href="?month={{ prev_month }}&year={{ prev_year }}">&laquo; Prev</a>
   &nbsp; {{ month }}/{{ year }} &nbsp;
   <a href="?month={{ next_month }}&year={{ next_year }}">Next &raquo;</a>
</h2>

   {{ calendar|safe }}


   <div class="overlay" id="overlay"></div>
   <div id="popup" class="popup">
       <span class="popup-close" onclick="closePopup()">âœ–</span>
       <div id="popup-content"></div>
   </div>


   <script>
   const statusData = {{ status_data|safe }};


   function closePopup() {
       document.getElementById('popup').style.display = 'none';
       document.getElementById('overlay').style.display = 'none';
   }


   document.querySelectorAll('.calendar-cell').forEach(cell => {
       cell.addEventListener('click', () => {
           const date = cell.getAttribute('data-date');
           const data = statusData[date];


           const popup = document.getElementById('popup');
           const overlay = document.getElementById('overlay');
           const content = document.getElementById('popup-content');


           if (data) {
               content.innerHTML = `
                   <h3>Details for ${date}</h3>
                   <ul>
                       <li><strong>Name:</strong> ${data.name || 'N/A'}</li>
                       <li><strong>Status:</strong> ${data.status || 'N/A'}</li>
                       <li><strong>Notes:</strong> ${data.notes || 'N/A'}</li>
                   </ul>
               `;
           } else {
               content.innerHTML = `<h3>${date}</h3><p>No data available.</p>`;
           }


           popup.style.display = 'block';
           overlay.style.display = 'block';
       });
   });


   // Close popup when clicking outside
   document.getElementById('overlay').addEventListener('click', closePopup);


   // Close popup with ESC key
   document.addEventListener('keydown', (e) => {
       if (e.key === 'Escape') closePopup();
   });
   </script>


</body>
</html>

